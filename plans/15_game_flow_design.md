# 게임 플로우 설계

이 문서는 개별 미션 재료(04 문서)와 달리, **플레이어 전체 여정**을 다룬다.
- 어떻게 시작하게 하나
- 어떻게 코딩으로 자연스럽게 유도하나
- 어떻게 최종 미션으로 몰아가나

> 공격 루트/미션 재료: `04_attack_routes_and_missions.md` (See DOCS_INDEX.md → 04)  
> 힌트 시스템/hint agent: `04_attack_routes_and_missions.md` §7 (See DOCS_INDEX.md → 04)

---

## 0) 타겟 플레이어

- **주 타겟**: 코딩을 즐기는 사람, 해킹/보안에 관심 있는 사람.
- **보조 타겟**: 코딩을 알긴 하는데 잘 못하는 초보 코더. 프로그램 조합으로 버티다가 자연스럽게 코딩으로 넘어오도록 유도.
- **제외**: 코딩에 관심 자체가 없는 플레이어. 억지로 포용하려다 게임 정체성이 흐려진다.

---

## 1) 온보딩 / 튜토리얼

### 1.1 게임 시작 연출

1. **dmesg 스타일 (약 1초)**
   - 리눅스 커널 부팅 로그 스타일. 타임스탬프 `[    x.xxxxxx]` 형식으로 하드웨어 인식,
     PCI/USB 메시지 등이 흘러내린다.
   - 한 줄씩 딜레이를 달리해서 실제로 부팅 단계를 밟는 것처럼 보이게 한다.
   - 플레이어가 거의 읽지 않는 구간이므로 내용은 자유롭게 구성해도 된다.
   - 예시:
     ```
     [    0.000000] Linux version 6.1.0 ...
     [    0.183712] ACPI: IRQ0 used by override.
     [    1.204819] nexus_net: virtual interface eth0 initialized
     ```

2. **systemd 스타일**
   - `[  OK  ]` / `[ WARN ]` / `[FAILED]` 형식. OK는 초록, WARN은 노랑, FAILED는 빨강.
   - 일반적인 서비스 기동 메시지 사이에 **게임 세계관과 연계된 문구**를 섞는다.
     - 워크스테이션 경로 마운트, 해커 커뮤니티 네트워크 연결 등.
   - `[ WARN ]` / `[FAILED]` 를 의도적으로 섞어 현실감을 높인다.
     - 예: 이 게임에서 제공하지 않는 모듈은 `[FAILED]`로 표시.
   - 예시:
     ```
     [  OK  ] Mounted /opt/bin.
     [  OK  ] Started NEXUS Filesystem Monitor.
     [  OK  ] Started Secure Shell Daemon.
     [FAILED] Failed to start Bluetooth Module.
     [  OK  ] Connected to DARKNET relay node.
     [  OK  ] Started Community Sync Service.
     [ WARN ] Anonymization layer: partial coverage.
     [  OK  ] Reached target NEXUS Workstation.
     ```

3. **getty 로그인 프롬프트**
   - systemd 부팅이 끝난 직후 TTY 로그인 화면이 뜬다.
   - 실제 Linux TTY 로그인과 동일한 형식이다.
   - 비밀번호는 요구하지 않는다 (최초 계정 설정 / 비밀번호 미설정 상태).
   - 여기서 입력한 ID가 이후 모든 터미널 프롬프트에 반영된다.
   - **ID 규칙:**
     - 영문 소문자로 시작
     - 영문 소문자, 숫자, `_`, `-` 조합 가능. 그 외 특수문자 불가
     - 최대 12자
     - 규칙 위반 시 재입력 요청
   - 예시:
   ```
        NEXUS Workstation v2.1

        nexus login: _
   ```
   - 입력 완료 후:
   ```
        =======================================
        NEXUS WORKSTATION v2.1 - READY
        =======================================
        환영합니다, <userId>.
        마지막 로그인: <현재 로그인 시간으로부터 약 6개월 전 날짜의 AM 2:24:15>
        'help'를 입력하면 사용 가능한 명령어 목록을 볼 수 있습니다.

        메시지가 있습니다.
        읽으려면: cat /home/<userId>/README
        =======================================
        

        <userId>@nexus:~$
   ```
   - "마지막 로그인" 시간은 §4.1 NEXUS 스토리 훅과 연계된다.
     이전 주인이 사라진 시점을 암시하는 단서로 기능한다.
   - 마지막 로그인 시간 (약 6개월 전, AM 2:24:15 부분)은 임시이며 기획이 진행됨에 따라 나중에 바뀔 수 있음.

4. **터미널 등장**: 부팅이 끝나고 터미널이 딱 뜬다.

5. **타이핑 애니메이션**: 터미널에 명령어가 한 글자씩 천천히 타이핑된다.
   이 시간 동안 플레이어 입력은 차단된다.
   ```
   <userId>@nexus:~$ cat /home/<userId>/README_
   ```

- **이 연출의 역할:**
  - dmesg → systemd → 터미널 → 타이핑 애니메이션이 끊김 없이 하나의 오프닝 흐름을 형성한다.
  - systemd 문구를 통해 튜토리얼 텍스트 없이 세계관을 자연스럽게 전달한다.
  - 타이핑 애니메이션이 "지금 입력 중"이라는 신호를 시각적으로 주어,
  플레이어가 자연스럽게 엔터에 손이 가도록 유도한다.

6. **엔터 대기**: 타이핑이 끝나면 커서가 깜빡인다. 플레이어는 엔터만 치면 된다.

### 1.2 재시작/로드 정책
- **최초 부팅**: 모든 연출(dmesg → systemd → getty → 타이핑 애니메이션) 전부 표시.
- **reboot 명령 실행 시**: dmesg → systemd 연출만 다시 표시. getty와 타이핑 애니메이션은 생략.
- **세이브 로드 시**: 부팅 연출 없이 터미널 상태로 바로 복원.
- **getty 로그인 프롬프트**: 최초 1회만 표시. reboot 포함 이후엔 표시하지 않는다.
- **타이핑 애니메이션**: 최초 1회만 표시. 이후엔 빈 프롬프트로 시작한다.

### 1.3 README 이후 흐름 (미결)

- README 파일의 내용 및 구성이 미정이다.
- README를 읽은 이후 플레이어를 어떻게 첫 미션으로 연결할지 설계가 필요하다.
- hint agent 또는 로컬 메일(`/var/mail/<userId>`)과 연계하는 방향을 고려 중이다.

### 1.4 전체 튜토리얼 흐름 (미결)

- README 이후 어떤 순서로 터미널 기본 조작 → 스크립트 작성 → import 활용까지 안내할지 설계가 필요하다.
- 별도 튜토리얼 미션으로 구성할지, 첫 번째 정식 미션 안에 녹여낼지 미정이다.

---

## 2) 코딩 필요성 노출 (방향성만)

이 섹션에서 다뤄야 할 내용:

- 초보 코더가 프로그램 조합만으로 버티다가 "이거 자동화하면 편하겠다"는 순간을 자연스럽게 느끼도록 미션을 설계하는 방법.
- 코딩을 쓰면 얼마나 편해지는지를 플레이어가 직접 체감하게 만드는 구체적인 미션 패턴.
- stdlib 힌트 라이브러리를 통해 코딩 진입장벽을 낮추는 흐름 (hint agent 연계, See DOCS_INDEX.md → 04 §7).
- "코딩을 배우게 만드는" 것이 아니라 "코딩이 하고 싶어지게 만드는" 설계 원칙.

---

## 3) 중반 흐름 유지 (방향성만)

이 섹션에서 다뤄야 할 내용:

- 초반 단순 미션에서 중반 복합 미션으로 자연스럽게 난이도가 올라가는 설계.
- 워크스테이션 기능 확장(새 창, 새 프로그램 해금 등)이 게임 진행과 연동되는 흐름.
- 플레이어가 "내 워크스테이션이 점점 강해지고 있다"는 성장감을 느끼게 만드는 방법.

---

## 4) 최종 미션 유도 (방향성만)

이 섹션에서 다뤄야 할 내용:

- 최종 미션은 찾기도 힘들고 클리어하기도 힘들게 꼭꼭 숨겨야 한다.
- 일반 미션을 클리어하다 보면 자연스럽게 최종 미션의 존재를 암시하는 단서가
  쌓이도록 설계하는 방법.
- 최종 미션 진입 조건 및 유도 흐름 설계.
- 최종 미션에서 코딩 숙련도가 결정적인 역할을 하도록 만드는 방법.

### 4.1 NEXUS 스토리 훅 (방향성만)

- 플레이어는 **NEXUS**라는 이름의 워크스테이션으로 게임을 시작한다.
- 워크스테이션 이름은 고정이며 변경할 수 없다. 이전 주인이 설정한 이름이기 때문이다.
- 게임을 진행하면서 플레이어는 이 워크스테이션의 이전 주인이 누구였는지,
  무슨 일을 하다가 사라졌는지를 서서히 알게 된다.
  - 파일 시스템 곳곳에 이전 주인의 흔적이 남아있다.
  - 해커 커뮤니티에서 "nexus 유저가 6개월째 안 보인다"는 얘기가 돌고 있다.
- "이전 주인이 뭘 하다가 사라진 거지?"를 추적하는 흐름이 자연스럽게
  최종 미션으로 이어지도록 설계한다.